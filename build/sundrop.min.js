/**
 * @license
 * Copyright 2023 GappleCider
 * MIT
 */
!function(t,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports):"function"==typeof define&&define.amd?define(["exports"],s):s((t="undefined"!=typeof globalThis?globalThis:t||self).SUN={})}(this,(function(t){"use strict";class s{constructor(t=0,s=0){this.x=t,this.y=s}get xPos(){return this.x}get yPos(){return this.y}set xPos(t){return this.x=t,this}set yPos(t){return this.y=t,this}set(t,s){return this.x=t,this.y=s,this}setPostion(t){return this.x=t,this.y=t,this}clone(){return this.constructor(this.x,this.y)}scale(t){return this.x*=t,this.y*=t,this}getPosition(){return{x:this.x,y:this.y}}}function i(t,s,i){return t+(s-t)*i}t.BasicMap=class{constructor(t,s,i="1x1"){this.map=t,this.key=s,this.value=i,this.processMap=()=>{const t=[];for(let s=0;s<this.map.length;s++){this.row=this.map[s];for(let i=0;i<this.row.length;i++){const o=this.row[i];for(let h=0;h<o.length;h++){const e=o[h];""!=e&&t.push([e,{x:i*Number(this.value[0]),y:s*Number(this.value[2])}])}}}return t},this.processedMap=this.processMap()}},t.BasicMesh=class{constructor(t){this.map=t}},t.Box=class{constructor(t,s,i,o){this.pos={x:t,y:s},this.width=i,this.height=o,this.props={visible:!0},this.tags={},this.class="polygon",this.type="box",this.polygon=this.createPolygon()}createPolygon(){let t=[];return t.push({x:this.pos.x-this.width/2,y:this.pos.y-this.height/2}),t.push({x:this.pos.x+this.width/2,y:this.pos.y-this.height/2}),t.push({x:this.pos.x+this.width/2,y:this.pos.y+this.height/2}),t.push({x:this.pos.x-this.width/2,y:this.pos.y+this.height/2}),t}update(){this.polygon=this.createPolygon()}},t.Circle=class{constructor(t,s,i){this.pos={x:t,y:s},this.radius=i,this.type="circle"}},t.Line=class{constructor(t,i,o,h){this.startPoint=new s(t,i),this.endPoint=new s(o,h),this.props={visible:!0},this.tags={},this.type="line"}},t.Polygon=class{constructor(t=[]){this.props={visible:!0},this.polygon=t,this.tags={},this.class="polygon",this.points.forEach((t=>{t.push(new s(t[0],t[1])),t.splice(0,2)}))}},t.Renderer=class{constructor(){this.objs=[],this.domElement=document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this._canvasWidth=this.domElement.width=window.innerWidth,this._canvasHeight=this.domElement.height=window.innerHeight}render(){this.ctx.clearRect(0,0,this._canvasWidth,this._canvasHeight);for(let t=0;t<this.objs.length;t++){if(null!=this.objs[t].props.color?this.ctx.fillStyle=this.objs[t].props.color:this.ctx.fillStyle="black","polygon"===this.objs[t].class&&this.objs[t].props.visible){this.ctx.beginPath(),this.ctx.moveTo(this.objs[t].polygon[0].x,this.objs[t].polygon[0].y);for(let s=0;s<this.objs[t].polygon.length-1;s++)this.ctx.lineTo(this.objs[t].polygon[s+1].x,this.objs[t].polygon[s+1].y);this.ctx.lineTo(this.objs[t].polygon[0].x,this.objs[t].polygon[0].y),this.ctx.closePath(),"fill"===this.objs[t].props.drawStyle?this.ctx.fill():"stroke"===this.objs[t].props.drawStyle&&(null!=this.props.stroke.color?this.ctx.strokeStyle=this.props.stroke.color:this.ctx.strokeStyle="black",null!=this.props.stroke.width?this.ctx.lineWidth=this.props.stroke.width:this.ctx.lineWidth=1,this.ctx.stroke())}"line"===this.objs[t].type&&this.objs[t].props.visible&&(null!=this.objs[t].props.stroke.color?this.ctx.strokeStyle=this.objs[t].props.stroke.color:this.ctx.strokeStyle="black",null!=this.objs[t].props.stroke.width?this.ctx.lineWidth=this.objs[t].props.stroke.width:this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(this.objs[t].startPoint.x,this.objs[t].startPoint.y),this.ctx.lineTo(this.objs[t].endPoint.x,this.objs[t].endPoint.y),this.ctx.closePath(),this.ctx.stroke()),"circle"===this.objs[t].type&&this.objs[t].props.visible&&(this.ctx.beginPath(),this.ctx.arc(this.objs[t].pos.x,this.objs[t].pos.y,this.objs[t].radius,0,2*Math.PI),this.ctx.closePath(),"fill"===this.objs[t].props.drawStyle&&this.ctx.fill(),"stroke"===this.objs[t].props.drawStyle&&(null!=this.objs[t].props.stroke.color?this.ctx.strokeStyle=this.objs[t].props.stroke.color:this.ctx.strokeStyle="black",null!=this.objs[t].props.stroke.width?this.ctx.lineWidth=this.objs[t].props.stroke.width:this.ctx.lineWidth=1,this.ctx.stroke()))}}add(t){this.objs.push(t)}remove(t){this.objs.splice(this.objs.indexOf(t),1)}clear(){this.objs=[]}get(t){return this.objs.indexOf(t)}update(){for(let t=0;t<this.objs.length;t++)"box"===this.objs[t].type&&this.objs[t].update()}setSize(t,s){this._canvasWidth=this.domElement.width=t,this._canvasHeight=this.domElement.height=s}setColor(t){this.domElement.style.backgroundColor=t}setAlpha(t){this.domElement.style.opacity=t}},t.Vec2=s,t.checkCollision=function(t,s){if("circle"===t.type&&"circle"===s.type){const o=t.radius+s.radius,h=t.pos.x-s.pos.x,e=t.pos.y-s.pos.y;return o>Math.sqrt(h*h+e*e)}if("polygon"===t.class&&"polygon"===s.class){function r(t,s,o,h){const e=(h.x-o.x)*(t.y-o.y)-(h.y-o.y)*(t.x-o.x),r=(o.y-t.y)*(t.x-s.x)-(o.x-t.x)*(t.y-s.y),n=(h.y-o.y)*(s.x-t.x)-(h.x-o.x)*(s.y-t.y);if(0!=n){const o=e/n,h=r/n;if(o>=0&&o<=1&&h>=0&&h<=1)return{x:i(t.x,s.x,o),y:i(t.y,s.y,o),offset:o}}return null}for(let n=0;n<t.polyon;n++)for(let l=0;l<s.polyon;l++){if(r(t.points[n],s.points[l],t.points[(n+1)%t.polyon],s.points[(l+1)%s.polyon]))return!0}return!1}if("polygon"===t.class&&"circle"===s.type){const c=Math.abs(s.pos.x-t.pos.x),p=Math.abs(s.pos.y-t.pos.y);if(c>t.width/2+s.radius||p>t.height/2+s.radius)return!1;if(c<=t.width/2||p<=t.height/2)return!0}if("circle"===t.type&&"polygon"===s.class){const a=Math.abs(t.pos.x-s.pos.x),y=Math.abs(t.pos.y-s.pos.y);if(a>s.width/2+t.radius||y>s.height/2+t.radius)return!1;if(a<=s.width/2||y<=s.height/2)return!0}},t.lerp=i,t.randomFloat=function(t,s){return Math.random()*(s-t)+t},t.randomInt=function(t,s){return Math.floor(Math.random()*(s-t))+t}}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3VuZHJvcC5taW4uanMiLCJzb3VyY2VzIjpbXSwic291cmNlc0NvbnRlbnQiOltdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OzsifQ==
