/**
 * @license
 * Copyright 2023 GappleCider
 * MIT
 */
!function(t,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports):"function"==typeof define&&define.amd?define(["exports"],s):s((t="undefined"!=typeof globalThis?globalThis:t||self).SUN={})}(this,(function(t){"use strict";class s{constructor(t=0,s=0){this.x=t,this.y=s}get xPos(){return this.x}get yPos(){return this.y}set xPos(t){return this.x=t,this}set yPos(t){return this.y=t,this}set(t,s){return this.x=t,this.y=s,this}setPostion(t){return this.x=t,this.y=t,this}clone(){return this.constructor(this.x,this.y)}scale(t){return this.x*=t,this.y*=t,this}getPosition(){return{x:this.x,y:this.y}}}function o(t,s,o){return t+(s-t)*o}t.BasicMap=class{constructor(t,s,o="1x1"){this.map=t,this.key=s,this.value=o,this.type="map",this.processMap=()=>{const t=[];for(let s=0;s<this.map.length;s++){this.row=this.map[s];for(let o=0;o<this.row.length;o++){const i=this.row[o];for(let o=0;o<i.length;o++){const h=i[o];if(" "!=h){const i=o*Number(this.value[0]),e=s*Number(this.value[2]),r=Number(this.value[0]),l=Number(this.value[2]),n=this.generatePolygon(i,e,r,l);let p;for(let t=0;t<Object.keys(this.key).length;t++)this.key[t]==h?p=this.key[t]:t==Object.keys(this.key).length-1&&console.error("Key not found");t.push[{pos:{x:i,y:e},width:r,height:l,polygon:n,props:p}]}}}}return t},this.processedMap=this.processMap()}generatePolygon(t,s,o,i){const h=[];return h.push({x:t-o/2,y:s-i/2}),h.push({x:t+o/2,y:s-i/2}),h.push({x:t+o/2,y:s+i/2}),h.push({x:t-o/2,y:s+i/2}),h}},t.Box=class{constructor(t,s,o,i){this.pos={x:t,y:s},this.width=o,this.height=i,this.props={visible:!0},this.tags={},this.class="polygon",this.type="box",this.polygon=this.createPolygon()}createPolygon(){let t=[];return t.push({x:this.pos.x-this.width/2,y:this.pos.y-this.height/2}),t.push({x:this.pos.x+this.width/2,y:this.pos.y-this.height/2}),t.push({x:this.pos.x+this.width/2,y:this.pos.y+this.height/2}),t.push({x:this.pos.x-this.width/2,y:this.pos.y+this.height/2}),t}update(){this.polygon=this.createPolygon()}},t.Circle=class{constructor(t,s,o){this.pos={x:t,y:s},this.radius=o,this.type="circle"}},t.Line=class{constructor(t,o,i,h){this.startPoint=new s(t,o),this.endPoint=new s(i,h),this.props={visible:!0},this.tags={},this.type="line"}},t.Polygon=class{constructor(t=[]){this.props={visible:!0},this.polygon=t,this.tags={},this.class="polygon",this.points.forEach((t=>{t.push(new s(t[0],t[1])),t.splice(0,2)}))}},t.Renderer=class{constructor(){this.objs=[],this.domElement=document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this._canvasWidth=this.domElement.width=window.innerWidth,this._canvasHeight=this.domElement.height=window.innerHeight}render(){this.ctx.clearRect(0,0,this._canvasWidth,this._canvasHeight);for(let t=0;t<this.objs.length;t++){if(null!=this.objs[t].props.color?this.ctx.fillStyle=this.objs[t].props.color:this.ctx.fillStyle="black","polygon"===this.objs[t].class&&this.objs[t].props.visible){this.ctx.beginPath(),this.ctx.moveTo(this.objs[t].polygon[0].x,this.objs[t].polygon[0].y);for(let s=0;s<this.objs[t].polygon.length-1;s++)this.ctx.lineTo(this.objs[t].polygon[s+1].x,this.objs[t].polygon[s+1].y);this.ctx.lineTo(this.objs[t].polygon[0].x,this.objs[t].polygon[0].y),this.ctx.closePath(),"fill"===this.objs[t].props.drawStyle?this.ctx.fill():"stroke"===this.objs[t].props.drawStyle&&(null!=this.props.stroke.color?this.ctx.strokeStyle=this.props.stroke.color:this.ctx.strokeStyle="black",null!=this.props.stroke.width?this.ctx.lineWidth=this.props.stroke.width:this.ctx.lineWidth=1,this.ctx.stroke())}if("line"===this.objs[t].type&&this.objs[t].props.visible&&(null!=this.objs[t].props.stroke.color?this.ctx.strokeStyle=this.objs[t].props.stroke.color:this.ctx.strokeStyle="black",null!=this.objs[t].props.stroke.width?this.ctx.lineWidth=this.objs[t].props.stroke.width:this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(this.objs[t].startPoint.x,this.objs[t].startPoint.y),this.ctx.lineTo(this.objs[t].endPoint.x,this.objs[t].endPoint.y),this.ctx.closePath(),this.ctx.stroke()),"circle"===this.objs[t].type&&this.objs[t].props.visible&&(this.ctx.beginPath(),this.ctx.arc(this.objs[t].pos.x,this.objs[t].pos.y,this.objs[t].radius,0,2*Math.PI),this.ctx.closePath(),"fill"===this.objs[t].props.drawStyle&&this.ctx.fill(),"stroke"===this.objs[t].props.drawStyle&&(null!=this.objs[t].props.stroke.color?this.ctx.strokeStyle=this.objs[t].props.stroke.color:this.ctx.strokeStyle="black",null!=this.objs[t].props.stroke.width?this.ctx.lineWidth=this.objs[t].props.stroke.width:this.ctx.lineWidth=1,this.ctx.stroke())),"map"===this.objs[t].type)for(let s=0;s<this.objs[t].processedMap.length;s++){const o=this.objs[t].processedMap[s];null!=o.props.color?this.ctx.fillStyle=o.props.color:this.ctx.fillStyle="black",this.ctx.beginPath(),this.ctx.moveTo(o.polygon[0].x,o.polygon[0].y);for(let t=0;t<o.polygon.length-1;t++)this.ctx.lineTo(o.polygon[t+1].x,o.polygon[t+1].y);this.ctx.lineTo(o.polygon[0].x,o.polygon[0].y),this.ctx.closePath(),this.ctx.fill()}}}add(t){this.objs.push(t)}remove(t){this.objs.splice(this.objs.indexOf(t),1)}clear(){this.objs=[]}get(t){return this.objs.indexOf(t)}update(){for(let t=0;t<this.objs.length;t++)"box"===this.objs[t].type&&this.objs[t].update()}setSize(t,s){this._canvasWidth=this.domElement.width=t,this._canvasHeight=this.domElement.height=s}setColor(t){this.domElement.style.backgroundColor=t}setAlpha(t){this.domElement.style.opacity=t}},t.Vec2=s,t.checkCollision=function(t,s){if("circle"===t.type&&"circle"===s.type){const i=t.radius+s.radius,h=t.pos.x-s.pos.x,e=t.pos.y-s.pos.y;return i>Math.sqrt(h*h+e*e)}if("polygon"===t.class&&"polygon"===s.class){function r(t,s,i,h){const e=(h.x-i.x)*(t.y-i.y)-(h.y-i.y)*(t.x-i.x),r=(i.y-t.y)*(t.x-s.x)-(i.x-t.x)*(t.y-s.y),l=(h.y-i.y)*(s.x-t.x)-(h.x-i.x)*(s.y-t.y);if(0!=l){const i=e/l,h=r/l;if(i>=0&&i<=1&&h>=0&&h<=1)return{x:o(t.x,s.x,i),y:o(t.y,s.y,i),offset:i}}return null}for(let l=0;l<t.polyon;l++)for(let n=0;n<s.polyon;n++){if(r(t.points[l],s.points[n],t.points[(l+1)%t.polyon],s.points[(n+1)%s.polyon]))return!0}return!1}if("polygon"===t.class&&"circle"===s.type){const p=Math.abs(s.pos.x-t.pos.x),c=Math.abs(s.pos.y-t.pos.y);if(p>t.width/2+s.radius||c>t.height/2+s.radius)return!1;if(p<=t.width/2||c<=t.height/2)return!0}if("circle"===t.type&&"polygon"===s.class){const y=Math.abs(t.pos.x-s.pos.x),a=Math.abs(t.pos.y-s.pos.y);if(y>s.width/2+t.radius||a>s.height/2+t.radius)return!1;if(y<=s.width/2||a<=s.height/2)return!0}},t.lerp=o,t.randomFloat=function(t,s){return Math.random()*(s-t)+t},t.randomInt=function(t,s){return Math.floor(Math.random()*(s-t))+t}}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3VuZHJvcC5taW4uanMiLCJzb3VyY2VzIjpbXSwic291cmNlc0NvbnRlbnQiOltdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OzsifQ==
