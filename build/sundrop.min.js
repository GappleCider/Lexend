/**
 * @license
 * Copyright 2023 GappleCider
 * MIT
 */
!function(t,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports):"function"==typeof define&&define.amd?define(["exports"],s):s((t="undefined"!=typeof globalThis?globalThis:t||self).SUN={})}(this,(function(t){"use strict";class s{constructor(t=0,s=0){this.x=t,this.y=s}get xPos(){return this.x}get yPos(){return this.y}set xPos(t){return this.x=t,this}set yPos(t){return this.y=t,this}set(t,s){return this.x=t,this.y=s,this}setPostion(t){return this.x=t,this.y=t,this}clone(){return this.constructor(this.x,this.y)}scale(t){return this.x*=t,this.y*=t,this}getPosition(){return{x:this.x,y:this.y}}}function o(t,s,o){return t+(s-t)*o}t.BasicMap=class{constructor(t,s,o="1x1"){this.map=t,this.key=s,this.value=o,this.type="map";const i=[];for(let t=0;t<this.map.length;t++){const s=this.map[t];for(let o=0;o<s.length;o++){const e=s[o];for(let s=0;s<e.length;s++){let o=e[s];if(" "!=o){const e=this.value.split("x"),h=s*Number(e[0]),r=t*Number(e[1]),l=Number(e[0]),n=Number(e[1]),p=this.generatePolygon(h,r,l,n),c=()=>{for(let t=0;t<=Object.keys(this.key).length;t++){if(this.key[o]){return this.key[o]}t==Object.keys(this.key).length&&console.error("No key found")}},y=c();o=class{constructor(t,s,o,i,e,h){this.x=t,this.y=s,this.width=o,this.height=i,this.polygon=e,this.props=h}},i.push({pos:{x:h,y:r},width:l,height:n,polygon:p,props:y})}}}}this.map=i}generatePolygon(t,s,o,i){const e=[];return e.push({x:t-o/2,y:s-i/2}),e.push({x:t+o/2,y:s-i/2}),e.push({x:t+o/2,y:s+i/2}),e.push({x:t-o/2,y:s+i/2}),e}},t.Box=class{constructor(t,s,o,i){this.pos={x:t,y:s},this.width=o,this.height=i,this.props={visible:!0},this.tags={},this.class="polygon",this.type="box",this.polygon=this.createPolygon()}createPolygon(){let t=[];return t.push({x:this.pos.x-this.width/2,y:this.pos.y-this.height/2}),t.push({x:this.pos.x+this.width/2,y:this.pos.y-this.height/2}),t.push({x:this.pos.x+this.width/2,y:this.pos.y+this.height/2}),t.push({x:this.pos.x-this.width/2,y:this.pos.y+this.height/2}),t}update(){this.polygon=this.createPolygon()}},t.Camera=class{constructor(t=0,s=0){this.pos={x:t,y:s}}follow(t,s=.5){this.pos.x=-t.pos.x+window.innerWidth/2+s,this.pos.y=-t.pos.y+window.innerHeight/2+s}setPos(t,s){this.pos={x:t,y:s}}},t.Circle=class{constructor(t,s,o){this.pos={x:t,y:s},this.radius=o,this.type="circle",this.props={visible:!0},this.tags={}}},t.Line=class{constructor(t,o,i,e){this.startPoint=new s(t,o),this.endPoint=new s(i,e),this.props={visible:!0},this.tags={},this.type="line"}},t.Polygon=class{constructor(t=[]){this.props={visible:!0},this.polygon=t,this.tags={},this.class="polygon",this.points.forEach((t=>{t.push(new s(t[0],t[1])),t.splice(0,2)}))}},t.Renderer=class{constructor(){this.objs=[],this.domElement=document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this._canvasWidth=this.domElement.width=window.innerWidth,this._canvasHeight=this.domElement.height=window.innerHeight}render(t=null){this.ctx.clearRect(0,0,this._canvasWidth,this._canvasHeight),t&&(this.ctx.save(),this.ctx.translate(t.pos.x,t.pos.y));for(let t=0;t<this.objs.length;t++){if("map"!=this.objs[t].type&&(null!=this.objs[t].props.color?this.ctx.fillStyle=this.objs[t].props.color:this.ctx.fillStyle="black"),"polygon"===this.objs[t].class&&this.objs[t].props.visible){this.ctx.beginPath(),this.ctx.moveTo(this.objs[t].polygon[0].x,this.objs[t].polygon[0].y);for(let s=0;s<this.objs[t].polygon.length-1;s++)this.ctx.lineTo(this.objs[t].polygon[s+1].x,this.objs[t].polygon[s+1].y);this.ctx.lineTo(this.objs[t].polygon[0].x,this.objs[t].polygon[0].y),this.ctx.closePath(),"fill"===this.objs[t].props.drawStyle?this.ctx.fill():"stroke"===this.objs[t].props.drawStyle&&(null!=this.props.stroke.color?this.ctx.strokeStyle=this.props.stroke.color:this.ctx.strokeStyle="black",null!=this.props.stroke.width?this.ctx.lineWidth=this.props.stroke.width:this.ctx.lineWidth=1,this.ctx.stroke())}if("line"===this.objs[t].type&&this.objs[t].props.visible&&(null!=this.objs[t].props.stroke.color?this.ctx.strokeStyle=this.objs[t].props.stroke.color:this.ctx.strokeStyle="black",null!=this.objs[t].props.stroke.width?this.ctx.lineWidth=this.objs[t].props.stroke.width:this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(this.objs[t].startPoint.x,this.objs[t].startPoint.y),this.ctx.lineTo(this.objs[t].endPoint.x,this.objs[t].endPoint.y),this.ctx.closePath(),this.ctx.stroke()),"circle"===this.objs[t].type&&this.objs[t].props.visible&&(this.ctx.beginPath(),this.ctx.arc(this.objs[t].pos.x,this.objs[t].pos.y,this.objs[t].radius,0,2*Math.PI),this.ctx.closePath(),"fill"===this.objs[t].props.drawStyle&&this.ctx.fill(),"stroke"===this.objs[t].props.drawStyle&&(null!=this.objs[t].props.stroke.color?this.ctx.strokeStyle=this.objs[t].props.stroke.color:this.ctx.strokeStyle="black",null!=this.objs[t].props.stroke.width?this.ctx.lineWidth=this.objs[t].props.stroke.width:this.ctx.lineWidth=1,this.ctx.stroke())),"map"===this.objs[t].type)for(let s=0;s<this.objs[t].map.length;s++){const o=this.objs[t].map[s];if(o.props.visible){if(null!=o.props.color?this.ctx.fillStyle=o.props.color:this.ctx.fillStyle="black","box"==o.props.type){this.ctx.beginPath(),this.ctx.moveTo(o.polygon[0].x,o.polygon[0].y);for(let t=0;t<o.polygon.length-1;t++)this.ctx.lineTo(o.polygon[t+1].x,o.polygon[t+1].y);this.ctx.lineTo(o.polygon[0].x,o.polygon[0].y),this.ctx.closePath(),"fill"===o.props.drawStyle&&this.ctx.fill(),"stroke"===o.props.drawStyle&&(null!=o.props.stroke.color?this.ctx.strokeStyle=o.props.stroke.color:this.ctx.strokeStyle="black",null!=o.props.stroke.width?this.ctx.lineWidth=o.props.stroke.width:this.ctx.lineWidth=1,this.ctx.stroke())}"circle"==o.props.type&&(this.ctx.beginPath(),this.ctx.arc(o.pos.x,o.pos.y,o.props.radius,0,2*Math.PI),this.ctx.closePath(),"fill"===o.props.drawStyle&&this.ctx.fill(),"stroke"===o.props.drawStyle&&(null!=o.props.stroke.color?this.ctx.strokeStyle=o.props.stroke.color:this.ctx.strokeStyle="black",null!=o.props.stroke.width?this.ctx.lineWidth=o.props.stroke.width:this.ctx.lineWidth=1,this.ctx.stroke()))}}}t&&this.ctx.restore()}add(t){this.objs.push(t)}remove(t){this.objs.splice(this.objs.indexOf(t),1)}clear(){this.objs=[]}get(t){return this.objs.indexOf(t)}update(){for(let t=0;t<this.objs.length;t++)if("box"===this.objs[t].type&&this.objs[t].update(),"map"==this.objs[t].type)for(let s=0;s<this.objs[t].map.length;s++){const o=this.objs[t].map[s];for(let t=0;t<Object.keys(o.props).length;t++)"function"==typeof o.props[Object.keys(o.props)[t]]&&(o.props.moveX&&(o.pos.x=o.props.moveX(o)),o.props.moveY&&(o.pos.y=o.props.moveY(o)))}}createGradient(t,s,o,i){if("linear"===t){const t=this.ctx.createLinearGradient(0,0,o,i);for(let o=0;o<=s.length;o++){const i=s[o];t.addColorStop(o/s.length,i)}return t}}createRGBAColor(t,s,o,i){return"rgba("+t+","+s+","+o+","+i+")"}createHexColor(t){let s=0;for(let o=0;o<t.length;o++)s=t.charCodeAt(o)+((s<<5)-s);let o="#";for(var i=0;i<3;i++){o+=("00"+(s>>8*i&255).toString(16)).substr(-2)}return o}convertHexToRGBA(t){let s;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))return s=t.substring(1).split(""),3==s.length&&(s=[s[0],s[0],s[1],s[1],s[2],s[2]]),s="0x"+s.join(""),"rgba("+[s>>16&255,s>>8&255,255&s].join(",")+",1)"}setSize(t,s){this._canvasWidth=this.domElement.width=t,this._canvasHeight=this.domElement.height=s}setColor(t){this.domElement.style.backgroundColor=t}setAlpha(t){this.domElement.style.opacity=t}},t.Vec2=s,t.checkCollision=function(t,s){if("circle"===t.type&&"circle"===s.type){const i=t.radius+s.radius,e=t.pos.x-s.pos.x,h=t.pos.y-s.pos.y;return i>Math.sqrt(e*e+h*h)}if("polygon"===t.class&&"polygon"===s.class){function r(t,s,i,e){const h=(e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x),r=(i.y-t.y)*(t.x-s.x)-(i.x-t.x)*(t.y-s.y),l=(e.y-i.y)*(s.x-t.x)-(e.x-i.x)*(s.y-t.y);if(0!=l){const i=h/l,e=r/l;if(i>=0&&i<=1&&e>=0&&e<=1)return{x:o(t.x,s.x,i),y:o(t.y,s.y,i),offset:i}}return null}for(let l=0;l<t.polyon;l++)for(let n=0;n<s.polyon;n++){if(r(t.points[l],s.points[n],t.points[(l+1)%t.polyon],s.points[(n+1)%s.polyon]))return!0}return!1}if("polygon"===t.class&&"circle"===s.type){const p=Math.abs(s.pos.x-t.pos.x),c=Math.abs(s.pos.y-t.pos.y);if(p>t.width/2+s.radius||c>t.height/2+s.radius)return!1;if(p<=t.width/2||c<=t.height/2)return!0}if("circle"===t.type&&"polygon"===s.class){const y=Math.abs(t.pos.x-s.pos.x),a=Math.abs(t.pos.y-s.pos.y);if(y>s.width/2+t.radius||a>s.height/2+t.radius)return!1;if(y<=s.width/2||a<=s.height/2)return!0}},t.lerp=o,t.randomFloat=function(t,s){return Math.random()*(s-t)+t},t.randomInt=function(t,s){return Math.floor(Math.random()*(s-t))+t}}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3VuZHJvcC5taW4uanMiLCJzb3VyY2VzIjpbXSwic291cmNlc0NvbnRlbnQiOltdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OzsifQ==
